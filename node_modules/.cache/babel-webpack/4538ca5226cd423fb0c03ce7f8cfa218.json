{"ast":null,"code":"import * as mapboxgl from 'mapbox-gl';\nimport { environment } from 'src/environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/properties.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../properties/property-detail/property-detail.component\";\nexport let MapsComponent = /*#__PURE__*/(() => {\n  class MapsComponent {\n    constructor(propertiesService, route) {\n      this.propertiesService = propertiesService;\n      this.route = route;\n      this.canShow = false;\n      this.detailProperty = this.property;\n      this.style = 'mapbox://styles/mapbox/streets-v11';\n      this.lat = 18.050508691302554;\n      this.lng = -15.963319982003418;\n    }\n\n    ngOnInit() {\n      mapboxgl.accessToken = environment.mapbox.accessToken;\n      this.map = new mapboxgl.Map({\n        container: 'map',\n        style: this.style,\n        zoom: 10,\n        center: [this.lng, this.lat]\n      }); // Add map controls\n\n      this.map.addControl(new mapboxgl.NavigationControl());\n      this.route.params.subscribe(params => {\n        if (params.name) {\n          this._getProperty(params.name);\n        }\n      });\n    }\n\n    _getProperty(name) {\n      this.propertiesService.getPropertyByName(name).subscribe(response => {\n        var _a;\n\n        let cords = ((_a = response[0].location) === null || _a === void 0 ? void 0 : _a.split(',')) || [18.0, -15.0];\n        let el = document.createElement('div');\n        el.style.width = '30px';\n        el.style.height = '30px';\n        el.style.background = `url(assets/icons/mapbox-marker-icon-gray.svg)`;\n        el.style.backgroundRepeat = 'no-repeat';\n        el.className = 'marker';\n        el.addEventListener('click', () => {\n          window.alert(response[0].name);\n        }); // Adding marker\n\n        const m = new mapboxgl.Marker(el).setLngLat([+cords[1], +cords[0]]).addTo(this.map);\n        this.property = response[0];\n      });\n    }\n\n  }\n\n  MapsComponent.ɵfac = function MapsComponent_Factory(t) {\n    return new (t || MapsComponent)(i0.ɵɵdirectiveInject(i1.PropertiesService), i0.ɵɵdirectiveInject(i2.ActivatedRoute));\n  };\n\n  MapsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: MapsComponent,\n    selectors: [[\"app-maps\"]],\n    inputs: {\n      detailProperty: \"detailProperty\"\n    },\n    decls: 3,\n    vars: 1,\n    consts: [[2, \"width\", \"100%\", \"height\", \"600px\"], [\"id\", \"map\", 1, \"match-parent\"], [3, \"mapProperty\"]],\n    template: function MapsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"section\", 0);\n        i0.ɵɵelement(1, \"div\", 1);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(2, \"app-property-detail\", 2);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"mapProperty\", ctx.property);\n      }\n    },\n    directives: [i3.PropertyDetailComponent],\n    styles: [\".match-parent[_ngcontent-%COMP%]{width:100%;height:100%}.marker[_ngcontent-%COMP%]{position:relative;display:block;border:none;border-radius:50%;cursor:pointer;padding:0}\"]\n  });\n  return MapsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}